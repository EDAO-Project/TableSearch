<!DOCTYPE html>
<html>
    <head>
        <title>Semantic Table Search Annotator</title>
        <style>
            .tips-box {
                border: 2px solid #008CBA;
                padding: 10px;
                margin: 20px 0;
                background-color: #e8f8f5;
            }
            h4 {
                text-align: center;
            }
            p {
                text-align: center;
            }
            table {
                width: 30%;
                border-collapse: collapse;
            }
            .center {
                margin-left: auto;
                margin-right: auto;
            }
            th, td {
                border: 1px solid black;
                padding: 15px;
                text-align: left;
            }
            .collapsible {
                background-color: #eee;
                color: #444;
                cursor: pointer;
                padding: 18px;
                width: 40%;
                border: none;
                text-align: left;
                outline: solid;
                font-size: 15px;
            }
            .active, .collapsible:hover {
                background-color: #ccc;
            }
            .content {
                padding: 0 18px;
                display: none;
                overflow: hidden;
                background-color: #f1f1f1;
            }
        </style>
    </head>
    <body>
        <div class="container" style="text-align: center;">
            <h2>Hello, {{ username }}!</h2>
        </div>

        <div class="tips-box">
            <h4>DBpedia prefix of query and table entities:</h4>
            <p>http://dbpedia.org/resource/</p>
        </div>

        <div style="text-align: center;">
            <h2>Query {{ query_id }}</h2>
            <table class="center">
                {% for tuple in query %}
                <tr>
                    {% for entity in tuple %}
                        <td><a href="http://dbpedia.org/resource/{{ entity }}">{{ entity }}</a></td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </table>
            <h3>Tables</h3>
            {% load filters %}
            {% for table in tables %}
                <button type="button" class="collapsible">
                    <div style="display:flex; flex-direction: row; justify-content: center; align-items: center">
                        <table class="center">
                            <tr>
                                {% for column in table|index:0 %}
                                    <td>{{ column|display }}</td>
                                {% endfor %}
                            </tr>
                        </table>
                        <p>Click to expand table</p>
                    </div>
                </button>
                <div class="content">
                    <table class="center">
                        {% for row in table %}
                            <tr>
                                {% for column in row %}
                                    {% if column|is_link == '1' %}
                                        <td><a href="http://www.wikipedia.org/wiki/{{ column }}">{{ column|display }}</a></td>
                                    {% else %}
                                        <td>{{ column|display }}</td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </table>
                </div>
                <br>
            {% endfor %}
        </div>
        <script>
            var coll = document.getElementsByClassName("collapsible");
            var i;

            for (i = 0; i < coll.length; i++) {
                coll[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    if (content.style.display === "block") {
                        content.style.display = "none";
                    } else {
                    content.style.display = "block";
                    }
                });
            }
        </script>
    </body>
</html>